<!doctype html>
<html lang="en">

    <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- Fonts CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300&display=swap" rel="stylesheet">
    <!-- My CSS -->
    <link rel="stylesheet" href="{{url_for('static', filename='styles.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/UeX-App.css')}}">

    <!-- Template js-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="{{url_for('static', filename='js/bootstrap.bundle.min.js')}}" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <!-- My js-->
    {{ moment.include_moment() }}

    <title>Tasks</title>
    </head>

    <body>
        <div class="d-flex flex-column text-center">
            <div class="d-flex justify-content-between align-items-center">
                <a href="{{ url_for('main.profile') }}" class="Style1">STUX</a>
                <div class="d-flex justify-content-evenly align-items-center" style="width: 50%;">
                    <a href="{{ url_for('main.about') }}" class="pe-auto Style3">About</a>
                    <a href="{{ url_for('main.features') }}" class="pe-auto Style3">Features</a>
                    <a href="{{ url_for('main.support') }}" class="pe-auto Style3">Support</a>
                    <a href="{{ url_for('main.dashboard') }}" class="pe-auto Style3">Dashboard</a>
                    <a href="{{ url_for('main.logout') }}" class="pe-auto Style3">LogOut</a>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-evenly text-center">
            <div class="d-flex flex-column">
                <div class="d-flex border3 shadow justify-content-center" style ="width: 600px; height: fit-content; margin-bottom: 40px; background-color: rgb(246, 246, 90);">
                    <span class="Style4">{{new_exp_name}}</span>
                </div>
                
                <div class="d-flex flex-column border1 shadow align-items-evenly" style ="width: 600px; height: 600px;">
                    <div class="d-flex flex-column" style="margin: 30px 0px 0px 40px;">
                        <div class="d-flex align-items-start">
                            <span class="NormalCharacterStyle8">Progress</span>
                        </div>
                        </br>
                        <div class="d-flex border3 align-items-center" style="padding: 0px 10px 0px 10px; width: fit-content; height: 40px; background-color: rgb(224, 222, 222);">
                            <span class="Style9">{{progress}}/{{numb}}</span>
                        </div>
                    </div>
                    <div class="d-flex flex-column" style="margin: 30px 0px 0px 40px;">
                        <div class="d-flex align-items-start">
                            <span class="NormalCharacterStyle8">Tools</span>
                        </div>
                        </br>
                        <div class="d-flex border3 align-items-center" style="padding: 0px 10px 0px 10px; width: fit-content; height: 40px; background-color: rgb(224, 222, 222);">
                            {% if tools == "" %}
                                <span class="Style9">None</span>
                            {% else %}
                                <span class="Style9">{{ tools }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <div class="d-flex flex-column" style="margin: 30px 0px 0px 40px;">
                        <div class="d-flex align-items-start">
                            <span class="NormalCharacterStyle8">Questionnaires</span>
                        </div>
                        </br>
                        <div class="d-flex border3 align-items-center" style="padding: 0px 10px 0px 10px; width: fit-content; height: fit-content; background-color: rgb(224, 222, 222);">
                            {% if quests == "" %}
                                <span class="Style9">None</span>
                            {% else %}
                                <span class="Style9">{{ quests }}</span>
                            {% endif %}
                        </div>
                    </div>
                    <form method="POST" action="{{ url_for('main.tasks', new_exp_id=new_exp_id, number=number) }}">
                        <div class="d-flex justify-content-center" style="margin-top: 100px;">
                            <input type="submit" name="next" class="btn startstopBtn rounded-pill Style9" value="To Dashboard" style="width: 180px;"/>
                        </div>
                    </form>
                </div>
            </div>
            <div class="d-flex border3 shadow" style ="width: auto; height: 500px; overflow: auto;">
                <form id="progform{{number}}" method="POST" action="{{ url_for('main.tasks', new_exp_id=new_exp_id, postID=number, number=number) }}"></form>
                <table id="DataTabTask" class="table table-hover table-bordered table-striped table-light" style="margin: 20px;">
                    <thead>
                        <tr style="font-size: 20px;">
                            <th scope="col" class="Style4">Participant ID</th>
                            <th scope="col" class="Style4">Data</th>
                            <th scope="col" class="Style4">Progress</th>
                        </tr> 
                    </thead>
                    <tbody id="ExperimentTabBody">
                        {% for number in howMany %}
                            <tr>
                                <th scope="row" class="Style10" style="vertical-align: middle;">{{ number }}</th>
                                <td class="d-flex justify-content-center align-items-center" style="text-align: center;">
                                    <a href="{{url_for('main.dashboard_experiment', row=new_exp_id)}}" class="questformBtn rounded-pill">Datalink</a>
                                </td>
                                <td id="progrow{{number}}" style="text-align: center;">
                                    <form method="POST" action="{{ url_for('main.tasks', new_exp_id=new_exp_id, number=number) }}" class="d-flex align-items-center justify-content-center" style="width: 100%; height: 100%;">
                                        {% if data_to_tasks.data == [] or number not in data_number %}
                                            <input id="sessiontest{{number}}" name="sessiontest" type="submit" class="btn questformBtn rounded-pill" value="Start Session {{ number }}" style="font-size: 24px;"/>
                                        {% endif %}
                                        {% for elem in data_to_tasks.data %}
                                            {% if elem.check == number %}
                                                <span id="done{{number}}" class='progressdone'>Done</span>
                                            {% endif %}
                                        {% endfor %}
                                    </form>                                    
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        <div class="d-flex justify-content-center" style="margin-top: 40px;">
        {% for message in get_flashed_messages() %}
            <div class="alert alert-info alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            {{ message }}
            </div>
        {% endfor %}
        </div>
    </body>
</html>